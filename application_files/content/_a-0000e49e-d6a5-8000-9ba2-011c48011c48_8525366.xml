<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<contentHaul xmlns:a="http://www.appian.com/ae/types/2009">
    <versionUuid>_a-0000e4a8-06eb-8000-9ba2-011c48011c48_8535626</versionUuid>
    <rule>
        <name>RC_IF_Servicios</name>
        <uuid>_a-0000e49e-d6a5-8000-9ba2-011c48011c48_8525366</uuid>
        <description>Interfaz que contiene la sección Servicios e Indicadores del alta de incidencias</description>
        <parentUuid>_a-0000e480-7e67-8000-9ba2-011c48011c48_8288662</parentUuid>
        <visibility>
            <advertise>false</advertise>
            <hierarchy>true</hierarchy>
            <indexable>true</indexable>
            <quota>false</quota>
            <searchable>true</searchable>
            <system>false</system>
            <unlogged>false</unlogged>
        </visibility>
        <definition>load(
  local!nulo,
  /*variables donde se guarda la info para luego añadir al grid*/
  local!proceso,
  local!modulo,
  local!descripcion,
  local!opcion1,
  local!opcion2,
  local!indicador,
  local!descripcionIndicador,
  local!descripcionNuevoModelo,
  local!motivoNingunControl,
  /*QUERIES*/
  local!queryServicios: #"_a-0000e49e-d6a5-8000-9ba2-011c48011c48_8515479"(Estado: true()),
  local!queryNuevoModeloControl: {},
  /*LABELS*/
  local!labelsAux,
  local!labelsProcesos: if(
    local!queryServicios.totalCount = 0,
    {},
    if(
      ri!idiomaEsp,
      union(local!queryServicios.data.ProcesoEsp,local!queryServicios.data.ProcesoEsp),
      union(local!queryServicios.data.ProcesoEng,local!queryServicios.data.ProcesoEng)
    )
  ),
  local!labelsModulos: {},
  local!labelsDescripciones: {},
  local!labelsOpcion1: {},
  local!labelsOpcion2: {},
  /*VALUES*/
  /*local!valuesAux,*/
  /*local!valuesGeografias: if(*/
    /*local!queryServicios.totalCount = 0,*/
    /*{},*/
    /*union(local!queryServicios.data.IdGeografia,local!queryServicios.data.IdGeografia)*/
  /*),*/
  /*local!valuesClientes: {},*/
  /*local!valuesSubclientes: {},*/
  with(
    local!mostrarSeccion: and(
      ri!Incidencia.ServicioAfectado = true(),
      if(
        #"_a-0000e1f2-c7ff-8000-9ba2-011c48011c48_4159842"(ri!Incidencia.EventoRiesgosPropiosHeracles),
        true(),
        not(ri!Incidencia.EventoRiesgosPropiosHeracles)
      )
    ),
    {
      #"SYSTEM_SYSRULES_sectionLayout_v1"(
        label: index(ri!labels, "incidencia.servicios.seccion"),
        contents: {
          #"SYSTEM_SYSRULES_richTextDisplayField"(
            label: index(ri!labels, "general.no-aplica-long"),
            labelPosition: "ABOVE",
            value: {
              #"SYSTEM_SYSRULES_richTextItem_v1"(
                text: {index(ri!labels, "incidencia.servicios.warning.no-aplica")}
              )
            },
            showWhen: not(local!mostrarSeccion)
          ),
          #"SYSTEM_SYSRULES_boxLayout"(
            label: index(ri!labels, "incidencia.servicios.catalogo"),
            contents: {
              #"SYSTEM_SYSRULES_sideBySideLayout"(
                items: {
                  #"SYSTEM_SYSRULES_sideBySideItem"(
                    item: #"SYSTEM_SYSRULES_dropdownField"(
                      label: index(ri!labels, "incidencia.servicios.proceso"),
                      labelPosition: "ABOVE",
                      placeholderLabel: index(ri!labels,"general.placeholder-dropdown"),
                      choiceLabels: {
                        local!labelsProcesos
                      },
                      choiceValues: {
                        local!labelsProcesos
                      },
                      value: local!proceso,
                      saveInto: {
                        local!proceso,
                        a!save(
                          {local!modulo,local!descripcion,local!opcion1,local!opcion2},
                          null
                        ),
                        if(
                          #"_a-0000e1f2-c7ff-8000-9ba2-011c48011c48_4159842"(local!proceso),
                          a!save(local!nulo,null),
                          {
                            a!save(
                              local!labelsAux,
                              index(
                                local!queryServicios.data.ModuloEsp,
                                wherecontains(
                                  local!proceso,
                                  local!queryServicios.data.ProcesoEsp
                                ),
                                null
                              )
                            ),
                            a!save(
                              local!labelsModulos,
                              union(local!labelsAux,local!labelsAux)
                            )
                          }
                        )
                      },
                      validations: {}
                    )
                  ),
                  #"SYSTEM_SYSRULES_sideBySideItem"(
                    item: #"SYSTEM_SYSRULES_dropdownField"(
                      label: index(ri!labels, "incidencia.servicios.modulo"),
                      labelPosition: "ABOVE",
                      placeholderLabel: index(ri!labels,"general.placeholder-dropdown"),
                      choiceLabels: {
                        local!labelsModulos
                      },
                      choiceValues: {
                        local!labelsModulos
                      },
                      /*value: local!Geografia.IdCliente,*/
                      /*saveInto: {*/
                        /*local!Geografia.IdCliente,*/
                        /*a!save(local!subclientes,null),*/
                        /*if(*/
                          /*rule!GDM_isNullorEmpty(local!Geografia.IdCliente),*/
                          /*a!save(local!nulo,null),*/
                          /*{*/
                            /*a!save(*/
                              /*local!labelsAux,*/
                              /*index(*/
                                /*local!queryServicios.data.Subcliente,*/
                                /*wherecontains(*/
                                  /*local!Geografia.IdGeografia,*/
                                  /*tointeger(local!queryServicios.data.IdGeografia)*/
                                /*),*/
                                /*null*/
                              /*)*/
                            /*),*/
                            /*a!save(*/
                              /*local!labelsDescripciones,*/
                              /*union(local!labelsAux,local!labelsAux)*/
                            /*),*/
                            /*a!save(*/
                              /*local!valuesAux,*/
                              /*index(*/
                                /*local!queryServicios.data.IdSubcliente,*/
                                /*wherecontains(*/
                                  /*local!Geografia.IdGeografia,*/
                                  /*tointeger(local!queryServicios.data.IdGeografia)*/
                                /*),*/
                                /*null*/
                              /*)*/
                            /*),*/
                            /*a!save(*/
                              /*local!valuesSubclientes,*/
                              /*union(local!valuesAux,local!valuesAux)*/
                            /*)*/
                          /*}*/
                        /*)*/
                      /*},*/
                      /*disabled: rule!GDM_isNullorEmpty(local!Geografia.IdGeografia),*/
                      validations: {}
                    )
                  ),
                  #"SYSTEM_SYSRULES_sideBySideItem"(
                    item: #"SYSTEM_SYSRULES_dropdownField"(
                      label: index(ri!labels, "incidencia.servicios.descripcion"),
                      labelPosition: "ABOVE",
                      placeholderLabel: index(ri!labels,"general.placeholder-dropdown"),
                      choiceLabels: {
                        local!labelsDescripciones
                      },
                      choiceValues: {
                        local!labelsDescripciones
                      },
                      /*value: local!subclientes,*/
                      /*saveInto: {*/
                        /*local!subclientes*/
                      /*},*/
                      /*disabled: rule!GDM_isNullorEmpty(local!Geografia.IdCliente),*/
                      validations: {}
                    )
                  )
                },
                alignvertical: "MIDDLE"
              ),
              #"SYSTEM_SYSRULES_columnsLayout"(
                columns: {
                  #"SYSTEM_SYSRULES_columnLayout"(
                    contents: {
                      #"SYSTEM_SYSRULES_dropdownField"(
                        label: index(ri!labels, "incidencia.servicios.opcion-comercial-1"),
                        labelPosition: "ABOVE",
                        placeholderLabel: "--- Seleccionar un valor ---",
                        choiceLabels: {"Opción 1", "Opción 2"},
                        choiceValues: {1, 2},
                        saveInto: {},
                        validations: {}
                      )
                    }
                  ),
                  #"SYSTEM_SYSRULES_columnLayout"(
                    contents: {
                      #"SYSTEM_SYSRULES_dropdownField"(
                        label: index(ri!labels, "incidencia.servicios.opcion-comercial-2"),
                        labelPosition: "ABOVE",
                        placeholderLabel: "--- Seleccionar un valor ---",
                        choiceLabels: {"Opción 1", "Opción 2"},
                        choiceValues: {1, 2},
                        saveInto: {},
                        validations: {}
                      )
                    }
                  )
                }
              )
            },
            showWhen: local!mostrarSeccion,
            style: "STANDARD",
            isCollapsible: true(),
            isInitiallyCollapsed: true(),
            marginBelow: "STANDARD"
          ),
          #"SYSTEM_SYSRULES_boxLayout"(
            label: index(ri!labels, "incidencia.servicios.indicador-control-afectado"),
            contents: {
              #"SYSTEM_SYSRULES_columnsLayout"(
                columns: {
                  #"SYSTEM_SYSRULES_columnLayout"(
                    contents: {
                      #"SYSTEM_SYSRULES_multipleDropdownField"(
                        label: index(ri!labels, "incidencia.servicios.indicador"),
                        labelPosition: "ABOVE",
                        choiceLabels: {"Opción 1", "Opción 2"},
                        choiceValues: {1, 2},
                        saveInto: {},
                        validations: {}
                      ),
                      #"SYSTEM_SYSRULES_multipleDropdownField"(
                        label: index(ri!labels, "incidencia.servicios.descripcion-nuevo-modelo"),
                        labelPosition: "ABOVE",
                        choiceLabels: {"Opción 1", "Opción 2"},
                        choiceValues: {1, 2},
                        saveInto: {},
                        validations: {}
                      )
                    }
                  ),
                  #"SYSTEM_SYSRULES_columnLayout"(
                    contents: {
                      #"SYSTEM_SYSRULES_multipleDropdownField"(
                        label: index(ri!labels, "incidencia.servicios.descripcion-indicador"),
                        labelPosition: "ABOVE",
                        choiceLabels: {"Opción 1", "Opción 2"},
                        choiceValues: {1, 2},
                        saveInto: {},
                        validations: {}
                      ),
                      #"SYSTEM_SYSRULES_textField"(
                        label: index(ri!labels, "incidencia.servicios.motivo-ningun-control"),
                        labelPosition: "ABOVE",
                        saveInto: {},
                        refreshAfter: "UNFOCUS",
                        validations: {}
                      )
                    }
                  )
                }
              ),
              #"SYSTEM_SYSRULES_richTextDisplayField"(
                label: "Add",
                labelPosition: "COLLAPSED",
                value: {
                  #"SYSTEM_SYSRULES_richTextIcon"(
                    icon: "plus"
                  )
                },
                align: "RIGHT"
              ),
              #"SYSTEM_SYSRULES_gridField"(
                label: "Tabla indicadores",
                labelPosition: "COLLAPSED",
                totalCount: 0,
                columns: {
                  #"SYSTEM_SYSRULES_gridTextColumn"(
                    label: "Columna de texto",
                    data: {}
                  )
                },
                value: #"SYSTEM_SYSRULES_pagingInfo"(startIndex: 1, batchSize: 5),
                saveInto: {},
                validations: {},
                shadeAlternateRows: true
              )
            },
            showWhen: local!mostrarSeccion,
            style: "STANDARD",
            isCollapsible: true(),
            isInitiallyCollapsed: true(),
            marginBelow: "STANDARD"
          )
        },
        isCollapsible: true(),
        isInitiallyCollapsed: true()
      )
      /*,a!debugInterface()*/
    }
  )
)</definition>
        <namedTypedValue>
            <name>labels</name>
            <type>
                <name>Variant</name>
                <namespace>http://www.appian.com/ae/types/2009</namespace>
            </type>
        </namedTypedValue>
        <namedTypedValue>
            <name>Incidencia</name>
            <type>
                <name>RC_CDT_Incidencia</name>
                <namespace>urn:com:appian:types:RC</namespace>
            </type>
        </namedTypedValue>
        <namedTypedValue>
            <name>proceso</name>
            <type>
                <name>ProcessModel</name>
                <namespace>http://www.appian.com/ae/types/2009</namespace>
            </type>
        </namedTypedValue>
        <namedTypedValue>
            <name>Geografias</name>
            <type>
                <name>RC_CDT_Geografia?list</name>
                <namespace>urn:com:appian:types:RC</namespace>
            </type>
        </namedTypedValue>
        <namedTypedValue>
            <name>Impactos</name>
            <type>
                <name>RC_CDT_Impacto?list</name>
                <namespace>urn:com:appian:types:RC</namespace>
            </type>
        </namedTypedValue>
        <namedTypedValue>
            <name>idiomaEsp</name>
            <type>
                <name>boolean</name>
                <namespace>http://www.w3.org/2001/XMLSchema</namespace>
            </type>
        </namedTypedValue>
        <preferredEditor>interface</preferredEditor>
        <offlineEnabled>false</offlineEnabled>
    </rule>
    <roleMap public="true">
        <role inherit="true" allowForAll="false" name="readers">
            <users/>
            <groups/>
        </role>
        <role inherit="true" allowForAll="false" name="authors">
            <users/>
            <groups/>
        </role>
        <role inherit="true" allowForAll="false" name="administrators">
            <users/>
            <groups/>
        </role>
        <role inherit="false" allowForAll="false" name="denyReaders">
            <users/>
            <groups/>
        </role>
        <role inherit="false" allowForAll="false" name="denyAuthors">
            <users/>
            <groups/>
        </role>
        <role inherit="false" allowForAll="false" name="denyAdministrators">
            <users/>
            <groups/>
        </role>
    </roleMap>
    <typedValue>
        <type>
            <name>RuleTestConfig?list</name>
            <namespace>http://www.appian.com/ae/types/2009</namespace>
        </type>
        <value>
            <el>
                <a:name/>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="a:Expression">#"_a-0000e480-7e67-8000-9ba2-011c48011c48_8412556"()</a:value>
                    <a:nameRef>labels</a:nameRef>
                    <a:id>1</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="a:Expression">'type!{urn:com:appian:types:RC}RC_CDT_Incidencia'('ServicioAfectado': true)</a:value>
                    <a:nameRef>Incidencia</a:nameRef>
                    <a:id>2</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true" xsi:type="a:ProcessModel"/>
                    <a:nameRef>proceso</a:nameRef>
                    <a:id>3</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:nameRef>Geografias</a:nameRef>
                    <a:id>4</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:nameRef>Impactos</a:nameRef>
                    <a:id>5</a:id>
                </a:ruleInputTestConfigs>
                <a:ruleInputTestConfigs>
                    <a:value xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:type="xsd:boolean">true</a:value>
                    <a:nameRef>idiomaEsp</a:nameRef>
                    <a:id/>
                </a:ruleInputTestConfigs>
                <a:assertions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:nil="true"/>
            </el>
        </value>
    </typedValue>
    <history>
        <historyInfo versionUuid="_a-0000e4a8-06eb-8000-9ba2-011c48011c48_8535626"/>
    </history>
</contentHaul>
